<div id="mainPage" class="easyui-layout">
    <div data-options="region:'west'" style="width:150px">
        <div id="ifaceList" title="网卡列表" style="width:100%;height:100%;"></div>
    </div>
    <div data-options="region:'center'">
        <table id="addressGrid" title="IP列表" style="width:100%;height:100%"></table>
    </div>
</div>
<div>
</div>

<script>
    $(function () {
        var addressGrid;
        var ifaceList;

        ifaceList = $('#ifaceList').datalist({
            method: 'GET',
            url: '/api/interfaces',
            valueField: 'name',
            textField: 'name',
            lines: true,
            onLoadSuccess: function () {
                ifaceList.datalist('selectRow', 0);
            },
            onSelect: function (index, iface) {
                addressGrid.datagrid({
                    url: '/api/interfaces/' + iface.type + '/' + iface.name + '/address'
                });
                addressGrid.datagrid('reload');
            }
        });

        var toollbar = [{
            text: '<i class="fa fa-plus-square" aria-hidden="true"></i> 添加',
            handler: function () { alert('add') }
        }, {
            text: '<i class="fa fa-trash-square" aria-hidden="true"></i> 删除',
            handler: function () { alert('delete') }
        }, {
            text: '<i class="fa fa-refresh" aria-hidden="true"></i> 刷新',
            handler: function () {
                grid.datagrid('reload');
            }
        }];
        var columns = [[
            { field: 'checkbox', checkbox: true },
            { field: 'ip', title: 'IP', width: 200, align: 'left', sortable: true },
            { field: 'mask', title: '掩码', width: 100, align: 'left' }
        ]];

        addressGrid = $('#addressGrid').datagrid({
            toolbar: toollbar,
            columns: columns,
            fitColumns: true,
            method: 'GET',
            loadMsg: '处理中，请等待...',
            remoteSort: false,
            sortName: 'name',
            sortOrder: 'asc',
            striped: true,
            pagination: true,
            pageSize: 50,
            pageList: [20, 50, 100]
        });

        ifaceList.datalist('load');
    });

</script>